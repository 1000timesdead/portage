<?xml version="1.0" encoding="UTF-8"?>
<config xmlns="http://mediatomb.cc/config/1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1" xsi:schemaLocation="http://mediatomb.cc/config/1 http://mediatomb.cc/config/1.xsd">
  <server>
    <ui enabled="yes">
      <accounts enabled="no" session-timeout="30">
        <account user="mediatomb" password="mediatomb"/>
      </accounts>
    </ui>
    <name>MediaTomb</name>
    <udn></udn>
    <home>/var/lib/mediatomb</home>
    <webroot>/usr/share/mediatomb/web</webroot>
    <storage>
      <sqlite3 enabled="yes">
        <database-file>mediatomb.db</database-file>
      </sqlite3>
      <mysql enabled="no">
        <host>?</host>
        <port>?</port>
        <username>?</username>
        <password>?</password>
        <database>?</database>
      </mysql>
    </storage>
    <!-- PS3 requires "yes" 
	Please ensure that this MediaTomb configuration provides reasonable defaults so that it
	works "out of the box" for the SONY Playstation 3, particularly for streaming lossless
	FLAC 16/44.1 files as well as video. The goal is to make the MediaTomb ebuild more and
	more user friendly and "emerge and go," starting with the PS3. Thanks! -Daniel Robbins
    -->
    <protocolInfo extend="yes"/>
<extended-runtime-options>
<ffmpegthumbnailer enabled="yes">
<thumbnail-size>128</thumbnail-size>
<seek-percentage>5</seek-percentage>
<filmstrip-overlay>yes</filmstrip-overlay>
<workaround-bugs>no</workaround-bugs>
</ffmpegthumbnailer>
</extended-runtime-options>
  </server>
  <import hidden-files="no">
    <autoscan use-inotify="auto">
      <directory location="/home/video/archive" mode="inotify" recursive="yes" hidden-files="no"/>
      <directory location="/home/music/archive" mode="inotify" recursive="yes" hidden-files="no"/>
      <directory location="/Pictures" mode="inotify" recursive="yes" hidden-files="no"/>
    </autoscan>
    <scripting script-charset="UTF-8">
      <common-script>/usr/share/mediatomb/js/common.js</common-script>
      <playlist-script>/usr/share/mediatomb/js/playlists.js</playlist-script>
      <!-- Only show PC Directory -->
      <virtual-layout type="builtin">
        <import-script>/usr/share/mediatomb/js/import.js</import-script>
        <dvd-script>/usr/share/mediatomb/js/import-dvd.js</dvd-script>
      </virtual-layout>
    </scripting>
    <mappings>
      <!-- Don't import anything not listed here since it's pointless -->
      <extension-mimetype ignore-unknown="no">
      <map from="mov" to="video/x-quicktime"/>
        <map from="mp3" to="audio/mpeg"/>
        <map from="ogg" to="application/ogg"/>
        <map from="asf" to="video/x-ms-asf"/>
        <map from="asx" to="video/x-ms-asf"/>
        <map from="wma" to="audio/x-ms-wma"/>
        <map from="wax" to="audio/x-ms-wax"/>
        <map from="wmv" to="video/x-ms-wmv"/>
        <map from="wvx" to="video/x-ms-wvx"/>
        <map from="wm" to="video/x-ms-wm"/>
        <map from="wmx" to="video/x-ms-wmx"/>
        <map from="m3u" to="audio/x-mpegurl"/>
        <map from="pls" to="audio/x-scpls"/>
        <map from="flv" to="video/x-flv"/>
        <!-- List images so they get imported -->
        <map from="jpg" to="image/jpeg"/>
        <map from="jpeg" to="image/jpeg"/>
        <map from="png" to="image/png"/>
        <map from="svg" to="image/svg"/>
        <!-- Added for PS3 DiVX support -->
        <map from="divx" to="video/x-divx"/>
        <map from="avi" to="video/x-divx"/>
	<map from="flac" to="audio/x-flac"/>
      </extension-mimetype>
      <mimetype-upnpclass>
        <map from="audio/*" to="object.item.audioItem.musicTrack"/>
        <map from="video/*" to="object.item.videoItem"/>
        <map from="image/*" to="object.item.imageItem"/>
      </mimetype-upnpclass>
      <mimetype-contenttype>
	<treat mimetype="audio/mpeg" as="mp3"/>
        <treat mimetype="application/ogg" as="ogg"/>
        <treat mimetype="audio/x-flac" as="flac"/>
        <treat mimetype="image/jpeg" as="jpg"/>
        <treat mimetype="audio/x-mpegurl" as="playlist"/>
        <treat mimetype="audio/x-scpls" as="playlist"/>
        <treat mimetype="audio/x-wav" as="pcm"/>
        <treat mimetype="audio/L16" as="pcm"/>
        <treat mimetype="video/x-msvideo" as="avi"/>
	<treat mimetype="video/divx" as="avi"/>
        <treat mimetype="video/mp4" as="mp4"/>
        <treat mimetype="audio/mp4" as="mp4"/>
        <treat mimetype="application/x-iso9660" as="dvd"/>
        <treat mimetype="application/x-iso9660-image" as="dvd"/>
	<treat mimetype="video/quicktime" as="mov"/>
	<treat mimetype="video/x-quicktime" as="mov"/>
        </mimetype-contenttype>
    </mappings>
     <online-content>
      <!-- Make sure to setup a transcoding profile for flv -->
      <YouTube enabled="yes" refresh="28800" update-at-start="yes" purge-after="604800" racy-content="exclude">
        <favorites user="drobbinsdaniel"/>
        <standardfeed feed="most_viewed" time-range="today"/>
        <playlists user="drobbinsdaniel"/>
        <uploads user="drobbinsdaniel"/>
        <standardfeed feed="recently_featured" time-range="today"/>
      </YouTube>
      <AppleTrailers enabled="yes" refresh="43200" update-at-start="yes" resolution="640"/>
    </online-content>
  </import>
  <transcoding enabled="yes">
    <mimetype-profile-mappings>
      <!-- Transcode flash and avi files -->
      <!--
	<transcode mimetype="video/x-flv" using="vlcmpeg"/>
	<transcode mimetype="video/x-ms-asf" using="vlcmpeg"/>
	<transcode mimetype="video/x-divx" using="vlcmpeg"/>
	<transcode mimetype="application/ogg" using="vlcmpeg"/>
	-->
	<transcode mimetype="audio/x-flac" using="oggflac2raw"/>
      <!-- Added for PS3 thumbnail support -->
      <transcode mimetype="video/x-divx" using="video-thumbnail"/>
      <transcode mimetype="video/x-avi" using="video-thumbnail"/>
      <!--
    <transcode mimetype="video/quicktime" using="vlcmpeg"/>
     <transcode mimetype="video/x-quicktime" using="vlcmpeg"/>
     -->
     <!--
     <transcode mimetype="application/ogg"   using="audio-generic"/>
     <transcode mimetype="audio/x-flac"      using="audio-generic"/>
     -->
     <transcode mimetype="video/x-ms-asf"    using="video-common"/>
     <transcode mimetype="video/x-flv"       using="video-common"/>
     <transcode mimetype="video/x-matroska"  using="video-common"/>
     <transcode mimetype="video/x-quicktime" using="video-common"/>
     <transcode mimetype="video/quicktime"   using="video-common"/>
     </mimetype-profile-mappings>
    <profiles>
      <profile name="oggflac2raw" enabled="yes" type="external">
        <mimetype>audio/L16</mimetype>
        <accept-url>no</accept-url>
        <first-resource>yes</first-resource>
        <accept-ogg-theora>no</accept-ogg-theora>
        <agent command="ogg123" arguments="-d raw -o byteorder:big -f %out %in"/>
        <buffer size="1048576" chunk-size="131072" fill-size="262144"/>
      </profile>
      <!-- Added for PS3 thumbnail support -->
      <profile name="video-thumbnail" enabled="yes" type="external">
        <mimetype>image/jpeg</mimetype>
        <accept-url>yes</accept-url>
        <thumbnail>yes</thumbnail>
        <resolution>128x128</resolution>
        <agent command="ffmpegthumbnailer" arguments="-i %in -o %out -s 128"/>
        <buffer size="524288" chunk-size="512" fill-size="1024"/>
      </profile>
      <profile name="video-common" enabled="yes" type="external">
              <mimetype>video/mpeg</mimetype>
	              <accept-url>yes</accept-url>
		              <first-resource>yes</first-resource>
			              <hide-original-resource>yes</hide-original-resource>
				              <accept-ogg-theora>yes</accept-ogg-theora>
					              <agent command="mediatomb-transcode-video" arguments="%in %out"/>
						              <buffer size="10485760" chunk-size="262144" fill-size="524288"/>
							            </profile>
    </profiles>
  </transcoding>
</config>
